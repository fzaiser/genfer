nat State;
nat Rate1;
nat Rate2;
nat observed;

State := 1;
Rate1 := geometric(0.1);
Rate2 := geometric(0.1);
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (2 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (2 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (2 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (2 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (4 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (4 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (1 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (1 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (1 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (1 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (2 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (2 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (4 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (4 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (3 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (3 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (3 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (3 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (5 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (5 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (1 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (1 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (2 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (2 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (3 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (3 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (1 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (1 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (3 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (3 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (3 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (3 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (2 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (2 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (0 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (0 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (2 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (2 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (6 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (6 = observed);
    State := bernoulli(0.8);
}
if (State = 0) {
    observed := iid(poisson(0.1), Rate1); observe (1 = observed);
    State := bernoulli(0.2);
} else {
    observed := iid(poisson(0.1), Rate2); observe (1 = observed);
    State := bernoulli(0.8);
}

?Ex[Rate2]
